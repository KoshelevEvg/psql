После добавление 1 млн строк размер бд 

```json
87 MB
```

Первый запуск кол-ва мертвых строчек после обновления 5 раз каждую строчку 

```json
[
  {
    "n_dead_tup": 5000000,
    "last_autovacuum": "2025-03-16 08:44:38.702808 +00:00"
  }
]
```

После ожидания некоторого времени и выполнения повторного запроса на кол-во мертвых строчек 

```json
[
  {
    "n_dead_tup": 0,
    "last_autovacuum": "2025-03-16 08:47:11.134167 +00:00"
  }
]
```

Теперь размер бд составляет 

```json
524 MB
```

Отключаем автовакуум. Обновляем все строки 10 раз и к каждой добавляем символ 

Смотрим размер БД
```json
1008 MB
```

Объяснение полученного результата

После отключения автовакуума, мертвые строки (старые версии строк, которые были обновлены) не удаляются автоматически. Это приводит к увеличению размера таблицы, так как PostgreSQL хранит все версии строк до тех пор, пока не будет выполнена ручная очистка (VACUUM).
Но даже после включения автовакуума и после того как были удалены мертвые строки, размер таблицы остается такой же, что бы можно было быстро получить место для новых строк. Что бы вернуть размер обратно нужно выполнить VACUUM FULL

Анонимная процедура для обновления строк

```postgresql
DO $$
    BEGIN
        FOR i IN 1..10 LOOP
                UPDATE test_table SET text_field = text_field || 'x';
            END LOOP;
    END $$;
```